/*! Knockout Sync - v0.1.0 - 2012-07-02
* https://github.com/katowulf/knockout-sync
* Copyright (c) 2012 Michael "Kato" Wulf; Licensed MIT, GPL */
(function(a,b){function c(b,c){var d=a.Deferred(),f=e(arguments);try{var g=f.fx.apply(f.scope,f.args);return g instanceof Error?d.reject(g).promise():h(g)?g:d.resolve(g).promise()}catch(i){return d.reject(i).promise()}}function d(b,c){var d=a.Deferred(),f=e(arguments,!0,d);b||(b=null);try{f.fx.apply(f.scope,f.args)}catch(g){d.reject(g)}return d.promise()}function e(a,b,c){var d=g(a),e,h=null,i=0;while(d.length&&!e&&i++<2)typeof d[0]=="function"?e=d.shift():h=d.shift()||null;if(!e)throw new Error("first two arguments to handle() and when() must be either a scope object or the function to run");return b&&f(d,c),{fx:e,scope:h,args:d}}function f(a,b){var c=-1,e,f=a.length,g=!1;if(f){while(++c<f)e=a[c],e===d.CALLBACK?(g=!0,a[c]=i(b)):e===d.ERRBACK&&(a[c]=j(b));g||a.unshift(i(b))}else a[0]=i(b),a[1]=j(b)}function g(a){return Array.prototype.slice.call(a)}function h(a){return a!==null&&typeof a=="object"&&typeof a.then=="function"&&typeof a.always=="function"}function i(a){return function(b){b instanceof Error?a.reject.apply(a,arguments):a.resolve.apply(a,arguments)}}function j(a){return function(){a.reject.apply(a,arguments)}}b.extenders.sync=function(a,c){return a.crud={isDirty:b.observable(c)},a.subscribe(function(b){a.crud.isDirty(!0)}),a},b.sync||(b.sync={}),b.sync.stores||(b.sync.stores=[]),b.sync.use=function(){},b.sync.newList=function(){},b.sync.newRecord=function(){},d.CALLBACK=new Object,d.ERRBACK=new Object,b.sync||(b.sync={}),b.sync.when=c,b.sync.handle=d})(jQuery,ko),function(a){function b(b){var d=a.utils.extend({type:"string",required:!1,persist:!0,observe:!0,minLength:0,maxLength:0,valid:null,format:function(a){return a}},b.defaults);this.store=b.dataStore,this.table=b.dataTable,this.key=b.primaryKey,this.sort=b.priorityField,this.validator=b.validator,this.fields=c(d,b.fields),this.recordFactory=new e(this)}function c(b,c){var e=[],f;for(var g in c)c.hasOwnProperty(g)&&(f=a.utils.extend(b,c[g]),d(f),e.push(f));return e}function d(a){if(!a.hasOwnProperty("default")||!a.default)switch(a.type){case"boolean":a.default=!1;break;case"int":case"float":case"date":a.default=0;break;case"string":case"email":default:a.default=null}}function e(a){}function f(){}a.sync||(a.sync={}),b.prototype.new=function(a){},e.create=function(a){},f.prototype.hasKey=function(){},f.prototype.getKey=function(){}}(ko);